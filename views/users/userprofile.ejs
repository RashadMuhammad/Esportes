<!DOCTYPE html>
<html lang="en">

<head>
    <title>Esportes</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--===============================================================================================-->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
    <!-- <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet"> -->
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="fonts/iconic/css/material-design-iconic-font.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="fonts/linearicons-v1.0.0/icon-font.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/slick/slick.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/MagnificPopup/magnific-popup.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/perfect-scrollbar/perfect-scrollbar.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="css/util.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/user/userprofile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">

    <!--===============================================================================================-->
    <style>

    </style>
</head>

<body class="animsition">

    <%- include('../partials/_header') %>

        <div class="mt-lg-5 pt-5">
            <div class="row">
                <!-- Sidebar Section -->

                <%- include('../partials/_sidebaruser') %>


                    <!-- Content Section -->
                    <div class="col-md-9 mt-2 px-5">
                        <div class="content-section" style="display:block;">
                            <!-- Default content or Profile Content -->
                            <div id="profile-content" class="content">
                                <h1 class="heading text-center mb-4">Profile</h1>

                                <!-- Form for updating user profile -->
                                <form action="/updateProfile" method="POST">
                                    <!-- Username Field -->
                                    <div class="form-group">
                                        <label class="label" for="username">Username:</label>
                                        <input type="text" class="form-control" id="username" name="username"
                                            placeholder="Enter your username" value="<%= user.username %>" readonly>
                                    </div>

                                    <!-- Email Field -->
                                    <div class="form-group">
                                        <label class="label" for="email">Email:</label>
                                        <input type="email" class="form-control" id="email" name="email"
                                            placeholder="Enter your email" value="<%= user.email %>" readonly>
                                    </div>

                                    <!-- Phone Number Field -->
                                    <div class="form-group">
                                        <label class="label" for="phone">Phone Number:</label>
                                        <input type="text" class="form-control" id="phone" name="phone"
                                            placeholder="Add your phone number" value="<%= user.phone %>" readonly>
                                    </div>

                                    <!-- Change Password Button and Edit Profile Button -->
                                    <div class="form-group d-flex justify-content-center">
                                        <button type="button" class="btn btn-success me-3" id="availableCouponsButton"
                                            data-bs-toggle="modal" data-bs-target="#availableCouponsModal">
                                            Available Coupon
                                        </button>

                                        <button type="button" class="btn btn-primary me-3" id="openChangePasswordModal"
                                            data-bs-toggle="modal" data-bs-target="#changePasswordModal">
                                            Change Password
                                        </button>
                                        <button type="button" class="btn btn-warning" data-bs-toggle="modal"
                                            data-bs-target="#editProfileModal">
                                            Edit Profile
                                        </button>
                                    </div>
                                </form>
                            </div>

                            <!-- Available Coupons Modal -->
                            <div class="modal fade" id="availableCouponsModal" tabindex="-1"
                                aria-labelledby="availableCouponsModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-lg">
                                    <div class="modal-content">
                                        <div class="modal-header bg-dark">
                                            <h5 class="modal-title text-white " id="availableCouponsModalLabel">
                                                Available Coupons
                                            </h5>

                                        </div>
                                        <div class="modal-body">
                                            <div id="couponContainer" class="row">
                                                <!-- Coupons will be populated here dynamically -->
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-danger"
                                                data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ========================================================================================================================== -->

                            <!-- Modal Structure -->
                            <div class="modal fade" id="editProfileModal" tabindex="-1"
                                aria-labelledby="editProfileModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="editProfileModalLabel">Edit Profile</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                aria-label="Close"></button>
                                        </div>
                                        <form id="editProfileForm" action="/updateProfile" method="POST">
                                            <div class="modal-body">
                                                <!-- Username Field -->
                                                <div class="form-group">
                                                    <label for="username">Username:</label>
                                                    <input type="text" class="form-control" id="username1"
                                                        name="username" value="<%= user.username %>" required>
                                                    <small id="usernameError" class="text-danger"></small>
                                                </div>

                                                <!-- Email Field (read-only) -->
                                                <div class="form-group">
                                                    <label for="email">Email: <span class="text-danger">(Email cannot be
                                                            changed)</span></label>
                                                    <input type="email" class="form-control" id="email1" name="email"
                                                        value="<%= user.email %>" readonly>
                                                </div>

                                                <!-- Phone Number Field (Optional) -->
                                                <div class="form-group">
                                                    <label for="phone">Phone Number (Optional):</label>
                                                    <input type="tel" class="form-control" id="phone1" name="phone"
                                                        value="<%= user.phone ? user.phone : '' %>">
                                                    <small id="phoneError" class="text-danger"></small>
                                                </div>
                                            </div>

                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary"
                                                    data-bs-dismiss="modal">Close</button>
                                                <button type="submit" class="btn btn-success"
                                                    id="saveChangesButton">Save
                                                    Changes</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>


                            <!--============================================================================================= -->

                            <!-- Change Password Modal -->
                            <div class="modal fade" id="changePasswordModal" tabindex="-1"
                                aria-labelledby="changePasswordModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-header bg-dark text-white">
                                            <h5 class="modal-title text-white fw-bold" id="changePasswordModalLabel">
                                                Change
                                                Your Password</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            <form id="changePasswordForm" action="/changePassword" method="POST">
                                                <div class="mb-3">
                                                    <label for="currentPassword" class="form-label">Current
                                                        Password:</label>
                                                    <div class="input-group">
                                                        <input type="password" class="form-control" id="currentPassword"
                                                            name="currentPassword" placeholder="Enter current password">
                                                        <span class="input-group-text">
                                                            <i class="fa fa-eye" id="toggleCurrentPassword"
                                                                style="cursor: pointer;"></i>
                                                        </span>
                                                    </div>
                                                    <div id="currentPasswordFeedback" class="invalid-feedback"
                                                        style="display: none;">Current password is required.</div>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="newPassword" class="form-label">New Password:</label>
                                                    <div class="input-group">
                                                        <input type="password" class="form-control" id="newPassword"
                                                            name="newPassword" placeholder="Enter new password">
                                                        <span class="input-group-text">
                                                            <i class="fa fa-eye" id="toggleNewPassword"
                                                                style="cursor: pointer;"></i>
                                                        </span>
                                                    </div>
                                                    <div id="newPasswordFeedback" class="invalid-feedback"
                                                        style="display: none;">New password is required.</div>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="confirmNewPassword" class="form-label">Confirm New
                                                        Password:</label>
                                                    <div class="input-group">
                                                        <input type="password" class="form-control"
                                                            id="confirmNewPassword" name="confirmNewPassword"
                                                            placeholder="Confirm new password">
                                                        <span class="input-group-text">
                                                            <i class="fa fa-eye" id="toggleConfirmPassword"
                                                                style="cursor: pointer;"></i>
                                                        </span>
                                                    </div>
                                                    <div id="passwordFeedback" class="invalid-feedback"
                                                        style="display: none;">Passwords do not match.</div>
                                                </div>
                                                <div class="text-end">
                                                    <button type="submit" class="btn btn-success"
                                                        id="submitPasswordChange">Update Password</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Include SweetAlert -->
                    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

            </div>

        </div>

        <!-- Load more -->
        <div class="flex-c-m flex-w w-full p-t-45 pb-5">
            <a href="#" class="flex-c-m stext-101 cl5 size-103 bg2 bor1 hov-btn1 p-lr-15 trans-04">
                Load More
            </a>
        </div>

        <%- include('../partials/_footer') %>

            <!-- Back to top -->
            <div class="btn-back-to-top" id="myBtn">
                <span class="symbol-btn-back-to-top">
                    <i class="zmdi zmdi-chevron-up"></i>
                </span>
            </div>

            <!--===============================================================================================-->
            <script src="vendor/jquery/jquery-3.2.1.min.js"></script>
            <!--===============================================================================================-->
            <script src="vendor/animsition/js/animsition.min.js"></script>
            <!--===============================================================================================-->
            <script src="vendor/bootstrap/js/popper.js"></script>
            <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
            <!--===============================================================================================-->
            <script src="vendor/select2/select2.min.js"></script>
            <!--===============================================================================================-->
            <script src="vendor/daterangepicker/moment.min.js"></script>
            <script src="vendor/daterangepicker/daterangepicker.js"></script>
            <!--===============================================================================================-->
            <script src="vendor/slick/slick.min.js"></script>
            <script src="js/slick-custom.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>

            <!--===============================================================================================-->
            <script src="vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>
            <!--===============================================================================================-->
            <script src="vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
            <script src="js/main.js"></script>
            <script src="userjs/userprofile.js"></script>
            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</body>

</html>